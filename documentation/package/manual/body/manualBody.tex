\documentclass[8pt]{extbook}
\usepackage{fullpage,mathptmx,graphs}

\renewcommand{\rmdefault}{phv}

\input{pageGeometry.tex}


% override for ``proper'' book layout, text body has same aspect ratio as page
% inner margin half of outer margin
%\geometry{papersize={\paperWidth,\paperHeight},scale=1.0, top=0.15in, bottom=0.3in,left=0.15in, right=0.3in,footskip=0.18in}
\geometry{papersize={\paperWidth,\paperHeight},scale=1.0, top=0.2in, bottom=0.4in,left=0.2in, right=0.4in,footskip=0.18in}
%\geometry{papersize={\paperWidth,\paperHeight},scale=1.0, top=0.25in, bottom=0.5in,left=0.25in, right=0.5in,footskip=0.18in}
%total={6.5in,5in}}

% make page numbers distinct from original design doc, too
\usepackage{fancyhdr}
\pagestyle{fancy}

% don't show chapter number in section headings
% because chapter numbers aren't used anywhere else in the document
\def\thesection{\arabic{section}}

\fancyhead{} % clear all fields
\fancyfoot{} % clear all fields
\fancyfoot[RO,LE]{\thepage}

\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}





% force all sections to start on new pages
%\let\stdsection\section  
%\renewcommand\section{\newpage \stdsection} 


\makeatletter %This allows us to turn off and on openright at will.
\newcommand{\startopenany}{\@openrightfalse}
\newcommand{\stopopenany}{\@openrighttrue}
\makeatother


\setcounter{tocdepth}{0}

\begin{document}

\frontmatter

\tableofcontents


\startopenany
\chapter{Introduction}

Diamond Trust of London has been a very long time coming, and it's too much of an uneven story to fully relate here.  Suffice it to say that what you hold in your hands right now exists only because of several unlikely and fortunate events.  

A turn-based deception game about diamond traders in Angola made entirely by two lifelong friends and released in a box for the Nintendo DS.  I can't believe it either, but it exists.  

I hope you enjoy playing it as much as I enjoyed making it.

\begin{flushright}
\begin{minipage}{1.5in}
Jason Rohrer\\
Las Cruces, New Mexico\\
August 2011
\end{minipage}
\end{flushright}


\stopopenany

\mainmatter


\makeatletter
\def\myEndPart{\vfil
\input{gamePhaseDiagram.tex}

              \if@twoside
                \null
                \thispagestyle{empty}%
                \newpage
              \fi
              \if@tempswa
                \twocolumn
              \fi}
\makeatother

% from extbook.cls
\makeatletter
\def\standardEndPart{\vfil\newpage
              \if@twoside
                \null
                \thispagestyle{empty}%
                \newpage
              \fi
              \if@tempswa
                \twocolumn
              \fi}
\makeatother




% just for this part, remove blank page after so we can stick figure there
\makeatletter
\renewcommand\@endpart{\myEndPart}
\makeatother

\part{Game Manual}
\addtocounter{chapter}{1}
\setcounter{section}{0}

%back to normal blank page after part
\makeatletter
\renewcommand\@endpart{\standardEndPart}
\makeatother





\section{Overview}
Diamond Trust is extremely simple on a basic mechanical level.  However, it's a new game design that does not share too many play patterns with other games that you've played before.  When you sit down at new platformer or a new realtime strategy game or a new first person shooter, you already know how to play.  That won't be the case with Diamond Trust---you must learn how to play.

First things first:  your goal is to {\bf have more diamonds than your opponent by the end of the game}.  How you use the mechanics to accomplish that goal is up to you.

Each game is divided into nine rounds, and during each round, play proceeds through a series of phases.  In each phase, you and your opponent make your move selection simultaneously and in secret.  Then both moves are revealed, the outcomes of the moves are applied, and the game advances to the next phase.

The mechanics at your disposal in the various phases include moving your agents from region to region, bidding on diamonds, moving the UN Inspector to change which regions are open for play, and selling some of your collected diamonds to raise additional money for future rounds.

On top of these basic mechanics, there is a layer of agent loyalty mechanics.  You can pay your agents to keep them loyal and bribe your opponent's agents to acquire their loyalty as well.  When an agent is loyal to the other side, suddenly the ``make your move in secret'' guarantee goes out the window.  Of course, you won't know that your agent has been compromised, unless you manage to bribe the agent that bribed your agent.  And all of this paying and bribing reduces the amount of money you have to bid on diamonds.  You really can't afford to do it.  Then again, you can't afford {\it not} to do it either.

\section{Structure of the game}

The diagram on page \pageref{fig:gameFlow} shows the phase progression during each round of the game.  That progression is repeated nine times until the end of the game.  Sections \ref{sec:payPhase} through \ref{sec:sellPhase} explain each game phase in detail.











\section{Controls}
The game is controlled entirely through single touches on the Touch Screen.  Various buttons and widgets appear on the Touch Screen when appropriate, and other situations require that you touch specific game elements directly.

\section{Hearing the music}

Diamond Trust's soundtrack features near-CD quality interactive music.  High quality headphones or external speakers are recommended.  

The music goes through transitions based on the decisions made by both players in the game.  Thus, it does not go through transitions when the game is idle, such as when the game is waiting on the title screen.  However, if you plug headphones or external speakers into the audio jack and then Close the System, the music will enter an auto-transition mode, allowing you to hear a fully-dynamic rendition of the soundtrack even while you're not actively playing the game.  Normal game-based music transitions will resume after you Open the System.

\section{Finding an opponent}

Diamond Trust is a game of skill for exactly two players.  You should eventually plan on playing the game exclusively against other people, but such match-ups are not ideal while you're still learning the game.  Maybe you could struggle along with another novice through your first game, but trying to learn while playing against and experienced player will likely be nerve-wracking for you and frustrating for your opponent.  The AI is provided to alleviate this problem.

\subsection{Practice against the AI}

If you touch ``Single Player'' from the title screen, you can pick an AI level and start a game against the AI.  The single player game works exactly the same way as a two player game, and the AI operates by the same rules as your human opponent would---it doesn't cheat by peaking at your secret information.

Unfortunately, reasoning about incomplete information requires quite a lot of ``possible worlds'' simulation on the part of the AI, which takes a long time in order to pick a good move.  At lower AI levels, the AI picks a move quickly but usually poorly.  At higher skill levels, the AI picks better moves but takes quite a bit longer.

Each additional level gives the AI more time to consider moves.  At level 2, it takes twice as long, while at level 7, it takes seven times as long.  But even at extremely high levels, where the AI is given an extraordinary amount of time to consider moves, human-level play is not possible.

Thus, the AI should be thought of as a practice opponent only.  Learn how to play the game, learn how to beat the AI at some of the lower skill levels, and then move on to a human opponent.  

\subsection{Single-Card Play}
\label{sec:singleCard}
To play against a friend, all you need is two DS systems and a single Diamond Trust Game Card.  By touching ``Two Player'' from the title screen, you can touch ``Host Single-Card Play'' serve the game to your friend's system via DS Download Play.  The only down-sides to this approach are the additional transmission and load time and the fact that the receiving player's game won't output music.

After the game has been served and loaded once, multiple games can be played against that friend.  It is even possible for two DS Download Play recipients to play subsequent games against each other.  Thus, a Diamond Trust party or tournament could be possible with only a few Game Cards shared by many people (see section \ref{sec:multiHosting} on page \pageref{sec:multiHosting} for more information).
 

\subsection{Multi-Card Play}
If both players have Diamond Trust Game Cards, they can connect to each other directly with no download time and both players experiencing the game's music.  After touching ``Two Player'' from the title screen, one player should touch ``Host Multi-Card Play'' while the other player touches ``Join Game.''

Headphones or two separate rooms are recommended to avoid unpleasant music combinations from the two systems.  Another option is to reduce the volume control to the minimum for one system and plug high-quality, external speakers into the audio jack for the second system, which will allow both players to listen to the music emanating from the second system.









\section{Game elements}

\subsection{Touch Screen elements:  Map and units}
Each player in the game is in control of three diamond trading agents.  The map is divided into eight regions:  six region in Angola, and one home region for each player (London and Antwerp, in the upper left and right corners of the screen, respectively).  Agents start the game in their home region, but they can move from region-to-region during the game.  At most one unit from each side is permitted in a given region of Angola.  Moving into the opponent's home region is forbidden.

The UN Inspector begins the game in a randomly chosen region of Angola.  The Inspector can be moved to other Angola regions throughout the game in response to player bribes, but he can never move into a player's home region.

Thus, a given home region can hold up to three agents from the same side.  A given region of Angola can hold up to three people:  one agent from each side and the UN Inspector.

The diamond icon in each Angola region indicates how many diamonds have accumulated there.

During the game, various buttons and widgets will appear on the Touch Screen when appropriate.  These include bid, bribe, and sale selectors, as well as buttons for finishing a move and advancing to the next game phase.

\subsubsection{In-game help}

During most phases of the game, a small ``?'' button in the lower right corner of the Touch Screen can be used to display relevant help text about the current phase.

\subsection{Upper screen elements:  Status displays}

Constant elements on the upper screen include the ledger sheets showing the money and diamond balance for each player (the opponent's money balance might be hidden, depending on what's going on in the game), the calendar showing the number of rounds remaining, and the green bar sheet at the bottom with information about the current game phase.

When an agent is selected during the game (when moving or paying that agent), a Rolodex card will appear showing known information about that agent.  Such information might include number of diamonds held, total salary, total bribes, the opponent agent known to have last bribed the agent, and other agents this agent is known to have bribed.  Of course, some of these elements may be unknown, depending on what's going on in the game (for example, an opponent agent's salary might be shown as ``?'' if that information has not been revealed to you).

During the Sell Diamonds phase of the game, additional ledger sheets are displayed showing the number sold and amount earned by each player.





\section{Game phases in detail}

\subsection{Game phase:  Pay agents}
\label{sec:payPhase}

During this phase, you can pay any of your own agents that are in your home region.  If your agents are out in the field, in Angola regions, they cannot be paid salary during this phase.  However, if one of your agent's out in the field occupies the same Angola region as an opponent agent, you can pay the opponent agent a bribe during this phase.

To determine which agents can be paid during this phase, look for agents that are waving their arms.  Touch an agent to adjust the salary or bribe payment to be made this round using the payment selection widget.  Touch the check mark on the widget to set the payment.  Before finishing your move, you can touch agents several times to adjust their salaries and bribes repeatedly.  Touch the ``Done'' button when to commit your payments. 

At the start of the game, all of your agents are at home, so you have the opportunity to pay salary to all three of them.  Since your agents aren't in contact with opponent agents, no bribes can be paid at the start of the game.

Salary that you pay to your agents keeps them loyal in the face of bribes they receive from your opponent.  Bribes paid to opponent agents might convert those agents' loyalty to your side.  If total salary payment meets or exceeds total bribes paid by the opponent to that agent, the agent remains loyal to its side.  However, if total bribes exceed total salary, the agent becomes loyal to the opponent.

Agents that have become loyal to the opponent reveal their hidden information secretly to the opponent.  Hidden information is described in greater detail in the following sections, but it includes move destinations, diamond bids, and inspector bribes, and number of diamonds selected to sell.

In particular, agents that have been successfully bribed reveal what other agents {\it they} have bribed, and for how much.  How much your own agents have been bribed is hidden from you, unless you successfully bribe the agent that bribed your agent---then you can find out.

\subsection{Game phase:  Move agents}
\label{sec:movePhase}

During this phase, you can specify destinations for each of your agents.  A trip inside Angola costs \$1 per agent.  A trip between Angola and Europe costs \$2 per agent.  The trip cost for the selected agent is shown at the top of that agent's Rolodex card.

To set an agent's destination, touch one of your agents and then touch an available destination region.  Unavailable regions are darkened after you pick an agent.  Remember that at most one of your agents can occupy each region of Angola.  You also need to be able to afford the trip cost.

If you pick an Angola region as a destination for an agent, you will then need to pick a bid for the diamonds in that region.  Use the bid selection widget to raise or lower your bid, and then touch the check mark to set the bid.

If you pick an Angola region occupied by the UN Inspector, you will get to specify a bribe payment for the Inspector after you specify your diamond bid.  The same widget is used to specify the Inspector's bribe.

All of your moves are specified at the same time as your opponent.  When you are satisfied with all of your chosen moves and payments, touch the ``Done'' button to commit your move.

\subsubsection{Moves revealed}
In the case where secret information is preserved for both sides, moves will be revealed and executed immediately after both players commit their moves.

However, in the case where some agents have been successfully compromised by opponent bribes, there will be a separate step where the moves of compromised agents are revealed and players get to adjust their moves before committing.  Of course, you only get to take advantage of this revealed information and chance to adjust if you have successfully bribed at least one of your opponent's agents.

This ``reveal and adjust'' step allows you to react to your opponent's chosen moves with better counter moves.  If you anticipate this step, it will also allow you to feed your opponent false information in your initial move selection.  Of course, you opponent might be doing the same thing to you.

During this step, players pick their final moves simultaneously and in secret.  Immediately after the reveal and adjust step, both final moves are revealed and executed.

\subsubsection{About diamond bids}
Auctions in Diamond Trust are somewhat unusual:  instead of a standard winner-pay auction mechanism, this game uses {\it both-pay auctions}.  If both players are sending an agent into a given region, they both specify bids, and both players pay the amount they have bid.  Then the highest bidder gets the diamonds in that region.  Even if players tie, both still pay their committed amounts, and neither player gets the diamonds.

\subsubsection{About inspector bribes}
Inspector bribes also follow the {\it both-pay} model.  The UN Inspector accepts bribe payments from both players, but only obeys the command of the player who pays him more.  Again, in the case of a tie, he takes money from both players but obeys neither player.

\subsection{Game phase:  Deposit diamonds}
\label{sec:depositPhase}

After agent moves are executed, any agents that have returned to their home regions deposit any diamonds that they are carrying.  Diamonds deposited at home are permanently safe from confiscation by the UN inspector and are also available for sale during the Sell Diamonds phase.

\subsection{Game phase:  Move UN Inspector}
\label{sec:inspectorPhase}

The UN Inspector has two functions in the game.  First, he blocks diamond acquisition in whatever region he occupies, effectively freezing the region and allowing diamonds to accumulate there.  Second, he confiscates diamonds carried by any agents that he encounters in his region.  However, if he will move this round due to a player's bribe, he only performs this confiscation after he moves, once he reaches his destination region.

After agents have moved and deposited any diamonds in home regions, the player who has paid a larger bribe to the UN Inspector gets to move the Inspector to a different region, if desired.  If neither player has paid him anything this round or both players have tied in terms of his payment, the Inspector does not move.

To move the Inspector, if you are the player who has paid him more, touch an Angola region as his destination.  You can switch regions by touching them.  When a region is selected, the upper screen shows information about what the Inspector will do in that region---the diamond sales to be blocked and the number of diamonds to be confiscated from each agent in that region.  When you are satisfied with the Inspector's selected destination, touch the ``Done'' button to make him move there.

After he moves, he performs his confiscation.  He also blocks whatever diamond sale was pending in his new region (though both players in that region still pay what they have bid for the diamonds there).  Thus, moving the Inspector can be used to open up an opportunity in one region while simultaneously shutting down an opportunity in another region.

\subsection{Game phase:  Collect diamonds}
\label{sec:collectPhase}

After the Inspector's move, if he moves at all, and confiscation, agents in the other Angola regions collect diamonds according to the both-pay rule describe above.  Diamonds in regions where no player bids or both players tie simply remain in their region, accumulating for the next round.

Agents hold the diamond that they have collected, which are vulnerable to future Inspector confiscation, until they return to their home regions to deposit them.


\subsection{Game phase:  Sell diamonds}
\label{sec:sellPhase}

Before the start of the next round, players are given the chance to sell some of their accumulated diamonds---those that have been brought back to their home regions---one the open market to raise additional capital.

A player who sells no diamonds at all gets a flat \$18 injection of fresh money.  Players that chose to sell diamonds get a share of \$24 based on how many diamonds are sold in total, by both players, that round.  A player's share is determined by their fraction of the total sold.  If only one player sells, that player gets the entire \$24, no matter how many that player sells.  If both players sell the same amount, no matter how many they each sell, each player gets half of the available money, or \$12.  The table on page \pageref{fig:sellTable} illustrates this break-down with various examples.  Note that if the total sold does not divide 24 evenly, the amount paid to each player is rounded down (as shown in the last line of the table).

\begin{figure}[t]
\begin{center}
\begin{tabular}{r|r||r|r}
Player 1 sells & Player 2 sells & Player 1 gets & Player 2 gets\\
\hline
\hline
0 & 0 & \$18 & \$18 \\
\hline
1 & 0 & \$24 & \$18 \\
2 & 0 & \$24 & \$18 \\
3 & 0 & \$24 & \$18 \\
\hline
1 & 1 & \$12 & \$12 \\
2 & 1 & \$16 & \$8 \\
3 & 1 & \$18 & \$6 \\
\hline
1 & 2 & \$8 & \$16 \\
2 & 2 & \$12 & \$12 \\
3 & 2 & \$14 & \$9 \\
\end{tabular} 
\end{center}
%\caption{Table of sell payoff examples}
\label{fig:sellTable}

\end{figure}



\section{End of the game}

During the last round of the game, when the calendar display on the upper screen shows ``0 months left'', the round ends after agents collect diamonds in their regions of Angola.  There is no final Sell Diamonds phase.  All agents immediately fly back to their home regions and deposit whatever diamonds they are carrying.  These final trips home are free of travel costs.

The player with the most diamonds at the end of the game wins.  In the case of a tie in diamond counts, the player with the most money wins.  In the case of a tie in both diamond counts and money balances---a rare occurrence, for sure---a true tie is declared.



\section{Playing again}
The host of the game must decide whether to start another game after a game ends.  If the host touches the ``Back'' button, both players will be disconnected and returned to the title screen, where they can each play against the AI or host/join games with other game partners.

As mentioned in section \ref{sec:singleCard}, if the host chooses not to play again during DS Download Play, the cardless player will still be returned to the title screen where she will have full access to all game features, including hosting and joining.  The only thing a cardless player cannot do is host DS Download Play for another DS system that still needs to download the game.  A cardless player can continue playing the game indefinitely, hosting and joining subsequent games, until she turns the power OFF.


\section{Multi-hosting tricks}
\label{sec:multiHosting}
The hosting, joining, and DS Download Play serving system in Diamond Trust is extremely flexible and allows several interesting play setups.

A single Game Card can be used to distribute the game to multiple cardless DS systems without necessarily starting games with any of them.  To use this trick, host Single-Card Play normally, and after the first cardless system receives the game and displays the ``Loading'' screen with the advancing credit page, touch the ``Back'' button on the host system to cancel hosting and return to the title screen.  The connecting system will of course be unable to connect to the host after loading, so touch the ``Back'' button on that system as well.  Now you have two systems that are at the title screen and ready to host or join games.

Repeat this process for additional cardless systems, transferring the game to each through DS Download Play, but backing out before the cardless system finishes loading the game.

You will now have a room full of friends who all have downloaded the game and are ready to play games against each other, all from a single Game Card.

If multiple people want to join chosen partners in the same room, they should pair up and host/join one pair at a time.  The default behavior of Diamond Trust when multiple people are hosting and joining simultaneously is to pair them up randomly with each other (there is no lobby view for selecting among multiple available hosts).  This behavior can be used, if half of the friends host and the other half join simultaneously, to play against a friend whose identity is unknown to you, adding yet another layer of uncertainty and deception.


\addcontentsline{toc}{chapter}{Credits}
\chapter*{Credits}

\paragraph{Jason Rohrer}
Concept, game design, programming, graphics, pixel fonts, package design, package photography, manual contents.

\paragraph{Tom Bailey}
Interactive music direction, composition, arrangement, and production.

\paragraph{Thanks}
Gun Consulting brought indiePub and Diamond Trust together.  Mark Seremet believed in this crazy project.  Lauren Serafin helped to playtest several early versions of the game.  The font used on the title screen is Oxford by Roger White.  The satellite image of Angola is from the NASA Visible Earth project.




\part[Original Design Document]{Original Design Document\\{\large(for historical interest only)}}
\addtocounter{chapter}{1}
\setcounter{section}{0}


% this document gets added later with a pdf merge (using gs)







\end{document}


